(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{595:function(s,n,a){"use strict";a.r(n);var t=a(13),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("strong",[s._v("无论是什么图，只要用D3画，都可以被拆分为以下的几个步骤")]),s._v("：")]),s._v(" "),a("blockquote",[a("p",[s._v("1、"),a("strong",[s._v("导入并处理数据")])])]),s._v(" "),a("blockquote",[a("p",[s._v("2、"),a("strong",[s._v("设置图表的尺寸")])])]),s._v(" "),a("blockquote",[a("p",[s._v("3、"),a("strong",[s._v("创建画布（wrapper and bounds)")])])]),s._v(" "),a("blockquote",[a("p",[s._v("4、"),a("strong",[s._v("创建比例尺")])])]),s._v(" "),a("blockquote",[a("p",[s._v("5、"),a("strong",[s._v("将数据导入到图表里(enter append join)")])])]),s._v(" "),a("blockquote",[a("p",[s._v("6、"),a("strong",[s._v("把坐标轴，图例等辅助工具导入图表")])])]),s._v(" "),a("blockquote",[a("p",[s._v("7、"),a("strong",[s._v("设置交互")])])]),s._v(" "),a("p",[s._v("本图例大致效果如图：\n"),a("img",{attrs:{src:"https://i.bmp.ovh/imgs/2022/05/08/a6c8b231e8ed3e32.png",alt:""}}),s._v(" "),a("img",{attrs:{src:"https://i.bmp.ovh/imgs/2022/05/08/d8c7b8faa401cb90.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"第一步-导入并处理数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一步-导入并处理数据"}},[s._v("#")]),s._v(" 第一步：导入并处理数据")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("async function drawScatter() {\n\n  // 1. Access data\n  const pathToJSON = './../data/seattle_wa_weather_data.json'\n  const dataset = await d3.json(pathToJSON)\n\n  // 设置数据格式\n  const xAccessor = d => d.temperatureMin\n  const yAccessor = d => d.temperatureMax\n  const colorScaleYear = 2000 // Why 2000? We're going to use this to wrap data so we can focus on MM-DD data points\n  const parseDate = d3.timeParse(\"%Y-%m-%d\")\n  const colorAccessor = d => parseDate(d.date).setYear(colorScaleYear)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"第二步-设置图标尺寸"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二步-设置图标尺寸"}},[s._v("#")]),s._v(" 第二步：设置图标尺寸")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("  const width = d3.min([\n    window.innerWidth * 0.75,\n    window.innerHeight * 0.75,\n  ])\n  let dimensions = {\n    width: width,\n    height: width,\n    margin: {\n      top: 90,\n      right: 90,\n      bottom: 50,\n      left: 50,\n    },\n    histogramMargin: 10,\n    histogramHeight: 70,\n    legendWidth: 250,\n    legendHeight: 26,\n  }\n  dimensions.boundedWidth = dimensions.width\n    - dimensions.margin.left\n    - dimensions.margin.right\n  dimensions.boundedHeight = dimensions.height\n    - dimensions.margin.top\n    - dimensions.margin.bottom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h2",{attrs:{id:"第三步-创建画布-wrapper-and-bounds"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三步-创建画布-wrapper-and-bounds"}},[s._v("#")]),s._v(" 第三步：创建画布（wrapper and bounds)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('  const wrapper = d3.select("#wrapper")\n    .append("svg")\n    .attr("width", dimensions.width)\n    .attr("height", dimensions.height)\n\n  const bounds = wrapper.append("g")\n    .style("transform", `translate(${\n      dimensions.margin.left\n      }px, ${\n      dimensions.margin.top\n      }px)`)\n\n  const boundsBackground = bounds.append("rect")\n    .attr("class", "bounds-background")\n    .attr("x", 0)\n    .attr("width", dimensions.boundedWidth)\n    .attr("y", 0)\n    .attr("height", dimensions.boundedHeight)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("h2",{attrs:{id:"第四步-创建比例尺"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第四步-创建比例尺"}},[s._v("#")]),s._v(" 第四步：创建比例尺")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('  const temperaturesExtent = d3.extent([\n    ...dataset.map(xAccessor),\n    ...dataset.map(yAccessor),\n  ])\n\n  //设置横纵轴比例尺\n\n  const xScale = d3.scaleLinear()\n    .domain(temperaturesExtent)\n    .range([0, dimensions.boundedWidth])\n    .nice()//加了nice，比例尺就很nice\n\n  const yScale = d3.scaleLinear()\n    .domain(temperaturesExtent)\n    .range([dimensions.boundedHeight, 0])\n    .nice()\n\n  // 一个有意思的颜色图例，即根据日期而非温度来变换颜色\n  const colorScale = d3.scaleSequential()\n    .domain([\n      d3.timeParse("%m/%d/%Y")(`1/1/${colorScaleYear}`),\n      d3.timeParse("%m/%d/%Y")(`12/31/${colorScaleYear}`),\n    ])\n    // Invert the value so that our fall colors are more appropriate (brown/orangeish)\n    .interpolator(d => d3.interpolateRainbow(-d))\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h2",{attrs:{id:"第五步-将数据导入到图表里-enter-append-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第五步-将数据导入到图表里-enter-append-join"}},[s._v("#")]),s._v(" 第五步：将数据导入到图表里(enter append join)")]),s._v(" "),a("p",[s._v("histogram和area能画出比较好看的流畅的直方图（感觉也不能叫直方图了..)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('  // 绘制散点图\n  const dotsGroup = bounds.append("g")\n  const dots = dotsGroup.selectAll(".dot")\n    .data(dataset, d => d[0])\n    .join("circle")\n    .attr("class", "dot")\n    .attr("cx", d => xScale(xAccessor(d)))\n    .attr("cy", d => yScale(yAccessor(d)))\n    .attr("r", 4)\n    // Fill our dots with the appropriate value from our color scale\n    .style("fill", d => colorScale(colorAccessor(d)))\n\n  // 绘制图上直方图\n  const topHistogramGenerator = d3.histogram()\n    .domain(xScale.domain())\n    .value(xAccessor)\n    .thresholds(20)//thresholds为分箱阈值生成器，20指生成20个分箱\n  // thresholds数字可以自由调节一下\n\n  const topHistogramBins = topHistogramGenerator(dataset)\n\n  const topHistogramYScale = d3.scaleLinear()\n    .domain(d3.extent(topHistogramBins, d => d.length))\n    .range([dimensions.histogramHeight, 0])\n\n  //将该直方图移到主体的上方\n  const topHistogramBounds = bounds.append("g")\n    .attr("transform", `translate(0, ${\n      -dimensions.histogramHeight\n      - dimensions.histogramMargin\n      })`)\n\n  //设置直方图平滑过渡(area块导入path里)\n  const topHistogramLineGenerator = d3.area()\n    .x(d => xScale((d.x0 + d.x1) / 2))\n    .y0(dimensions.histogramHeight)\n    .y1(d => topHistogramYScale(d.length))\n    .curve(d3.curveBasis)\n\n  const topHistogramElement = topHistogramBounds.append("path")\n    .attr("d", d => topHistogramLineGenerator(topHistogramBins))\n    .attr("class", "histogram-area")\n\n  // 绘制图右直方图（以下同）\n  const rightHistogramGenerator = d3.histogram()\n    .domain(yScale.domain())\n    .value(yAccessor)\n    .thresholds(20)\n\n  const rightHistogramBins = rightHistogramGenerator(dataset)\n\n  const rightHistogramYScale = d3.scaleLinear()\n    .domain(d3.extent(rightHistogramBins, d => d.length))\n    .range([dimensions.histogramHeight, 0])\n\n  const rightHistogramBounds = bounds.append("g")\n    .attr("class", "right-histogram")\n    .style("transform", `translate(${\n      // 这里需要旋转，注意一下\n      dimensions.boundedWidth + dimensions.histogramMargin\n      }px, -${\n      dimensions.histogramHeight\n      }px) rotate(90deg)`)\n\n  const rightHistogramLineGenerator = d3.area()\n    .x(d => yScale((d.x0 + d.x1) / 2))\n    .y0(dimensions.histogramHeight)\n    .y1(d => rightHistogramYScale(d.length))\n    .curve(d3.curveBasis)\n\n  const rightHistogramElement = rightHistogramBounds.append("path")\n    .attr("d", d => rightHistogramLineGenerator(rightHistogramBins))\n    .attr("class", "histogram-area")\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br")])]),a("h2",{attrs:{id:"第六步-把坐标轴-图例等辅助工具导入图表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第六步-把坐标轴-图例等辅助工具导入图表"}},[s._v("#")]),s._v(" 第六步：把坐标轴，图例等辅助工具导入图表")]),s._v(" "),a("p",[a("strong",[s._v("横轴和纵轴的导入")]),s._v("自然不用多说，注意坐标轴容器刻度的位置和记得call就好。")]),s._v(" "),a("p",[a("strong",[s._v("颜色图例")]),s._v("是一个很难搞的内容。先搞"),a("strong",[s._v("颜色梯度")]),s._v("，再"),a("strong",[s._v("嵌入矩形")]),s._v("，最后"),a("strong",[s._v("加上刻度、标记")]),s._v("等。")]),s._v(" "),a("p",[a("strong",[s._v("怎么导刻度")]),s._v("呢？1、刻度尺搞出来（就是颜色的比例尺放入矩形长度的range里）；2、把自己选好的几个点进行处理，通过刻度尺，映射到图上（注意设置y不要让它与颜色图例重合）；3、刻度嵌入进去")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('  // 设置横轴（注意通过call将scale导入坐标轴容器里）\n  const xAxisGenerator = d3.axisBottom()\n    .scale(xScale)\n    .ticks(4)\n\n  const xAxis = bounds.append("g")\n    .call(xAxisGenerator)\n    .style("transform", `translateY(${dimensions.boundedHeight}px)`)\n\n  const xAxisLabel = xAxis.append("text")\n    .attr("class", "x-axis-label")\n    .attr("x", dimensions.boundedWidth / 2)\n    .attr("y", dimensions.margin.bottom - 10)\n    .html("Minimum Temperature (&deg;F)")\n\n  // 设置纵轴（注意通过call将scale导入坐标轴容器里）\n  const yAxisGenerator = d3.axisLeft()\n    .scale(yScale)\n    .ticks(4)\n\n  const yAxis = bounds.append("g")\n    .call(yAxisGenerator)\n\n  const yAxisLabel = yAxis.append("text")\n    .attr("class", "y-axis-label")\n    .attr("x", -dimensions.boundedHeight / 2)\n    .attr("y", -dimensions.margin.left + 10)\n    .html("Maximum Temperature (&deg;F)")\n\n  // 设置右下方的颜色图例\n  const legendGroup = bounds.append("g")\n    .attr("transform", `translate(${\n      // Notice that we can place this legend within our scatterplot chart based on our dataset\n      dimensions.boundedWidth - dimensions.legendWidth - 9\n      },${\n      dimensions.boundedHeight - 37\n      })`)\n\n  // 定义颜色梯度\n  const defs = wrapper.append("defs") \n\n  const numberOfGradientStops = 10\n  const stops = d3.range(numberOfGradientStops).map(i => (\n    i / (numberOfGradientStops - 1)\n  ))\n  const legendGradientId = "legend-gradient"\n  const gradient = defs.append("linearGradient")\n    .attr("id", legendGradientId)\n    .selectAll("stop")\n    .data(stops)\n    .enter().append("stop")\n    .attr("stop-color", d => d3.interpolateRainbow(-d))\n    .attr("offset", d => `${d * 100}%`)\n\n  //将颜色梯度导入矩形的fill,现在五颜六色的矩形出来了\n  const legendGradient = legendGroup.append("rect")\n    .attr("height", dimensions.legendHeight)\n    .attr("width", dimensions.legendWidth)\n    .style("fill", `url(#${legendGradientId})`)\n\n  //刻度尺搞出来\n  const tickValues = [\n    d3.timeParse("%m/%d/%Y")(`2/1/${colorScaleYear}`),\n    d3.timeParse("%m/%d/%Y")(`5/1/${colorScaleYear}`),\n    d3.timeParse("%m/%d/%Y")(`8/1/${colorScaleYear}`),\n    d3.timeParse("%m/%d/%Y")(`11/1/${colorScaleYear}`),\n  ]\n  const legendTickScale = d3.scaleLinear()\n    .domain(colorScale.domain())\n    .range([0, dimensions.legendWidth])\n\n  //把选好的点映射到图上\n  const legendValues = legendGroup.selectAll(".legend-value")\n    .data(tickValues)\n    .enter().append("text")\n    .attr("class", "legend-value")\n    .attr("x", legendTickScale)\n    .attr("y", -6)\n    .text(d3.timeFormat("%b"))\n\n  //搞个刻度\n  const legendValueTicks = legendGroup.selectAll(".legend-tick")\n    .data(tickValues)\n    .enter().append("line")\n    .attr("class", "legend-tick")\n    .attr("x1", legendTickScale)\n    .attr("x2", legendTickScale)\n    .attr("y1", 6)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br")])]),a("h2",{attrs:{id:"第七步-增加交互效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第七步-增加交互效果"}},[s._v("#")]),s._v(" 第七步：增加交互效果")]),s._v(" "),a("p",[s._v("简而言之，"),a("strong",[s._v("voronoi图")]),s._v("就是一个看上去更好看、更好交互的图。x、y用于定位，extent用来设定voronoi布局的具体范围。")]),s._v(" "),a("p",[a("code",[s._v("diagram.polygons()")]),s._v("\n返回一个稀疏的并且根据 extent 被裁剪的多边形数组，每个多边形都有一个对应的 cell（用来交互的）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('  // create voronoi for tooltips\n  const voronoiGenerator = d3.voronoi()\n    .x(d => xScale(xAccessor(d)))\n    .y(d => yScale(yAccessor(d)))\n    .extent([\n      [0, 0],\n      [dimensions.boundedWidth, dimensions.boundedHeight]\n    ])\n\n  const voronoiPolygons = voronoiGenerator.polygons(dataset)\n\n  const voronoi = dotsGroup.selectAll(".voronoi")\n    .data(voronoiPolygons)\n    .enter().append("polygon")\n    .attr("class", "voronoi")\n    //下面这几行没太看懂quq\n    .attr("points", (d = []) => (\n      d.map(point => (\n        point.join(",")\n      )).join(" ")\n    ))\n  // Uncomment to see the Voronoi polygons generated from our dataset\n  // .attr("stroke", "grey")\n\n  voronoi.on("mouseenter", onVoronoiMouseEnter)\n    .on("mouseleave", onVoronoiMouseLeave)\n\n  const tooltip = d3.select("#tooltip")\n  const hoverElementsGroup = bounds.append("g")\n    .attr("opacity", 0)\n\n  // 设置两根从选中点发射出来的线段。用<rect>s 而不是 <line>s 来更好的展现动画效果\n  const horizontalLine = hoverElementsGroup.append("rect")\n    .attr("class", "hover-line")\n  const verticalLine = hoverElementsGroup.append("rect")\n    .attr("class", "hover-line")\n\n  // 设置选定圆\n  const dayDot = hoverElementsGroup.append("circle")\n    .attr("class", "tooltip-dot")\n\n  // 鼠标放上来的function\n  function onVoronoiMouseEnter(voronoiDatum) {\n    const datum = voronoiDatum.data\n\n    hoverElementsGroup.style("opacity", 1)\n    const x = xScale(xAccessor(datum))\n    const y = yScale(yAccessor(datum))\n    dayDot.attr("cx", d => x)\n      .attr("cy", d => y)\n      //设定选中圆的大小\n      .attr("r", 7)\n\n  // 设定一下两条线的一些参数\n    const hoverLineThickness = 10\n    horizontalLine.attr("x", x)\n      .attr("y", y - hoverLineThickness / 2)\n      .attr("width", dimensions.boundedWidth\n        + dimensions.histogramMargin\n        + dimensions.histogramHeight\n        - x)\n      .attr("height", hoverLineThickness)\n    verticalLine.attr("x", x - hoverLineThickness / 2)\n      .attr("y", -dimensions.histogramMargin\n        - dimensions.histogramHeight)\n      .attr("width", hoverLineThickness)\n      .attr("height", y\n        + dimensions.histogramMargin\n        + dimensions.histogramHeight)\n\n  // 设定提示框文字里的温度及其格式（保留一位小数）\n    const formatTemperature = d3.format(".1f")\n    tooltip.select("#max-temperature")\n      .text(formatTemperature(yAccessor(datum)))\n\n    tooltip.select("#min-temperature")\n      .text(formatTemperature(xAccessor(datum)))\n\n  // 设定提示框文字里的日期\n    const dateParser = d3.timeParse("%Y-%m-%d")\n    const formatDate = d3.timeFormat("%A, %B %-d, %Y")\n    tooltip.select("#date")\n      .text(formatDate(dateParser(datum.date)))\n\n  // 设定提示框放在哪捏\n    const tooltipX = xScale(xAccessor(datum))\n      + dimensions.margin.left\n    const tooltipY = yScale(yAccessor(datum))\n      + dimensions.margin.top\n      - 4 // bump up so it doesn\'t overlap with out hover circle\n  // \n    tooltip.style("transform", `translate(`\n      + `calc( -50% + ${tooltipX}px),`\n      + `calc(-100% + ${tooltipY}px)`\n      + `)`)\n\n    tooltip.style("opacity", 1)\n  }\n\n  // 鼠标移走的function\n  function onVoronoiMouseLeave() {\n    hoverElementsGroup.style("opacity", 0)\n    tooltip.style("opacity", 0)\n  }\n\n  // 图例的交互设置\n  legendGradient.on("mousemove", onLegendMouseMove)\n    .on("mouseleave", onLegendMouseLeave)\n\n  // 设定图例的选定框\n  const legendHighlightBarWidth = dimensions.legendWidth * 0.05\n  const legendHighlightGroup = legendGroup.append("g")\n    .attr("opacity", 0)\n  const legendHighlightBar = legendHighlightGroup.append("rect")\n    .attr("class", "legend-highlight-bar")\n    .attr("width", legendHighlightBarWidth)\n    .attr("height", dimensions.legendHeight)\n\n  // 设定选定框的文字提示位置\n  const legendHighlightText = legendHighlightGroup.append("text")\n    .attr("class", "legend-highlight-text")\n    .attr("x", legendHighlightBarWidth / 2)\n    .attr("y", -6)\n\n  // 与两个直方图也交互起来\n  const hoverTopHistogram = topHistogramBounds.append("path")\n  const hoverRightHistogram = rightHistogramBounds.append("path")\n\n  // 鼠标移到图例上的function\n  function onLegendMouseMove(e) {\n    //d3.mouse()函数用于返回当前事件的x坐标和y坐标。如果事件被点击，那么它将返回点击的x和y位置。\n    const [x] = d3.mouse(this)  \n    const minDateToHighlight = new Date(\n      legendTickScale.invert(x - legendHighlightBarWidth) //invert将range对象的数据反向映射到domain对象的数据\n    )\n    const maxDateToHighlight = new Date(\n      legendTickScale.invert(x + legendHighlightBarWidth)\n    )\n  \n  // d3.median()返回中值或中点\n    const barX = d3.median([\n      0,\n      x - legendHighlightBarWidth / 2,\n      dimensions.legendWidth - legendHighlightBarWidth,\n    ])\n\n  // 设定图例选定框的文字提示\n    legendHighlightGroup.style("opacity", 1)\n      .style("transform", `translateX(${barX}px)`)\n    const formatLegendDate = d3.timeFormat("%b %d")\n    legendHighlightText.text([\n      formatLegendDate(minDateToHighlight),\n      formatLegendDate(maxDateToHighlight),\n    ].join(" - "))\n\n  // 刻度与刻度标识在选定图例时都消失捏\n    legendValues.style("opacity", 0)\n    legendValueTicks.style("opacity", 0)\n\n  // 设置动画捏\n    dots.transition().duration(100)\n      //选定图例时图上的点都变淡了捏，还变小了捏\n      .style("opacity", 0.08)\n      .attr("r", 2)\n\n    const getYear = d => +d3.timeFormat("%Y")(d)\n    const isDayWithinRange = d => {\n      const date = colorAccessor(d)\n\n    //colorScaleYear设定的是2000年，一定小于数据的年份，这里只是为了去除错误项\n      if (getYear(minDateToHighlight) < colorScaleYear) {\n        // if dates wrap around to previous year,\n        // check if this date is after the min date\n        return date >= new Date(minDateToHighlight)\n          .setYear(colorScaleYear)\n          || date <= maxDateToHighlight\n\n      } else if (getYear(maxDateToHighlight) > colorScaleYear) {\n        // if dates wrap around to next year,\n        // check if this date is before the max date\n        return date <= new Date(maxDateToHighlight)\n          .setYear(colorScaleYear)\n          || date >= minDateToHighlight\n\n      } else {\n        return date >= minDateToHighlight\n          && date <= maxDateToHighlight\n      }\n    }\n\n  //在选定框内的区域还是突出显示捏\n    const relevantDots = dots.filter(isDayWithinRange)\n      .transition().duration(100)\n      .style("opacity", 1)\n      .attr("r", 5)\n\n  //设置一下直方图的交互捏\n    const hoveredDates = dataset.filter(isDayWithinRange)\n\n    const hoveredDate = d3.isoParse(legendTickScale.invert(x))\n    hoverTopHistogram.attr("d", d => (\n      topHistogramLineGenerator(topHistogramGenerator(hoveredDates))\n    ))\n      .attr("fill", colorScale(hoveredDate))\n      .attr("stroke", "white")\n      .style("opacity", 1)\n\n    hoverRightHistogram.attr("d", d => (\n      rightHistogramLineGenerator(\n        rightHistogramGenerator(hoveredDates)\n      )\n    ))\n      .attr("fill", colorScale(hoveredDate))\n      .attr("stroke", "white")\n      .style("opacity", 1)\n\n  }\n\n  //鼠标移走后都复原捏\n  function onLegendMouseLeave() {\n    dotsGroup.selectAll(".dot")\n      .transition().duration(500)\n      .style("opacity", 1)\n      .attr("r", 4)\n\n    legendValues.style("opacity", 1)\n    legendValueTicks.style("opacity", 1)\n    legendHighlightGroup.style("opacity", 0)\n    hoverTopHistogram.style("opacity", 0)\n    hoverRightHistogram.style("opacity", 0)\n  }\n\n}\ndrawScatter()\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br"),a("span",{staticClass:"line-number"},[s._v("190")]),a("br"),a("span",{staticClass:"line-number"},[s._v("191")]),a("br"),a("span",{staticClass:"line-number"},[s._v("192")]),a("br"),a("span",{staticClass:"line-number"},[s._v("193")]),a("br"),a("span",{staticClass:"line-number"},[s._v("194")]),a("br"),a("span",{staticClass:"line-number"},[s._v("195")]),a("br"),a("span",{staticClass:"line-number"},[s._v("196")]),a("br"),a("span",{staticClass:"line-number"},[s._v("197")]),a("br"),a("span",{staticClass:"line-number"},[s._v("198")]),a("br"),a("span",{staticClass:"line-number"},[s._v("199")]),a("br"),a("span",{staticClass:"line-number"},[s._v("200")]),a("br"),a("span",{staticClass:"line-number"},[s._v("201")]),a("br"),a("span",{staticClass:"line-number"},[s._v("202")]),a("br"),a("span",{staticClass:"line-number"},[s._v("203")]),a("br"),a("span",{staticClass:"line-number"},[s._v("204")]),a("br"),a("span",{staticClass:"line-number"},[s._v("205")]),a("br"),a("span",{staticClass:"line-number"},[s._v("206")]),a("br"),a("span",{staticClass:"line-number"},[s._v("207")]),a("br"),a("span",{staticClass:"line-number"},[s._v("208")]),a("br"),a("span",{staticClass:"line-number"},[s._v("209")]),a("br"),a("span",{staticClass:"line-number"},[s._v("210")]),a("br"),a("span",{staticClass:"line-number"},[s._v("211")]),a("br"),a("span",{staticClass:"line-number"},[s._v("212")]),a("br"),a("span",{staticClass:"line-number"},[s._v("213")]),a("br"),a("span",{staticClass:"line-number"},[s._v("214")]),a("br"),a("span",{staticClass:"line-number"},[s._v("215")]),a("br"),a("span",{staticClass:"line-number"},[s._v("216")]),a("br"),a("span",{staticClass:"line-number"},[s._v("217")]),a("br"),a("span",{staticClass:"line-number"},[s._v("218")]),a("br"),a("span",{staticClass:"line-number"},[s._v("219")]),a("br"),a("span",{staticClass:"line-number"},[s._v("220")]),a("br"),a("span",{staticClass:"line-number"},[s._v("221")]),a("br"),a("span",{staticClass:"line-number"},[s._v("222")]),a("br"),a("span",{staticClass:"line-number"},[s._v("223")]),a("br"),a("span",{staticClass:"line-number"},[s._v("224")]),a("br"),a("span",{staticClass:"line-number"},[s._v("225")]),a("br"),a("span",{staticClass:"line-number"},[s._v("226")]),a("br"),a("span",{staticClass:"line-number"},[s._v("227")]),a("br"),a("span",{staticClass:"line-number"},[s._v("228")]),a("br"),a("span",{staticClass:"line-number"},[s._v("229")]),a("br"),a("span",{staticClass:"line-number"},[s._v("230")]),a("br"),a("span",{staticClass:"line-number"},[s._v("231")]),a("br"),a("span",{staticClass:"line-number"},[s._v("232")]),a("br"),a("span",{staticClass:"line-number"},[s._v("233")]),a("br"),a("span",{staticClass:"line-number"},[s._v("234")]),a("br")])]),a("h2",{attrs:{id:"别忘了设置html文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#别忘了设置html文件"}},[s._v("#")]),s._v(" 别忘了设置HTML文件！")]),s._v(" "),a("p",[s._v("好了，具体的内容差不多到这就结束了。但是一般，我们会把D3的代码放在一个js文件里，然后在另一个html文件里使用它。\n以下是html文件的内容。注意，提示框的文字格式就是在html文件里设置的。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<!DOCTYPE html>\n<html lang="en">\n\n<head>\n  <link rel="stylesheet" href="./css/styles.css" />\n  <title>Example 10: Marginal histogram</title>\n</head>\n\n<body>\n  <h2 class="title">Daily Temperature Ranges</h2>\n  <div class="description">Daily minimum and maximum temperatures for Seattle over the past year</div>\n\n  <div id="wrapper" class="wrapper">\n\n    <div id="tooltip" class="tooltip">\n      <div class="tooltip-date">\n        <span id="date"></span>\n      </div>\n      <div class="tooltip-temperature">\n        <span id="min-temperature"></span>&deg;F\n        -\n        <span id="max-temperature"></span>&deg;F\n      </div>\n    </div>\n\n  </div>\n\n  <script src="./../d3.v5.js"><\/script>\n  <script src="./js/scatter.js"><\/script>\n</body>\n\n</html>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);